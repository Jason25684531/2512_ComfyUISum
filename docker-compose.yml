version: '3.8'

services:
  # 您的 Redis 服務
  redis:
    image: redis:7.2
    container_name: studio-redis
    ports:
      - "6379:6379"
    command: redis-server --requirepass mysecret --appendonly yes
    volumes:
      # [關鍵] 將容器內的 /data 對應到您 Windows 本地的 ./redis_data 資料夾
      # 這樣就算刪除容器，資料也還在！
      - ./redis_data:/data
    restart: always
    networks:
      - studio-net

  # (預告) 明天 Day 2 我們會把 Flask 加在這裡
  # web:
  #   build: ./backend
  #   ports: ["5000:5000"]
  #   depends_on: [redis]

networks:
  studio-net:
    driver: bridge