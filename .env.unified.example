# ============================================
# ComfyUI Studio - 環境配置檔案
# ============================================
# 複製此檔案為 .env 並根據你的環境填入實際值
# cp .env.example .env

# ============================================
# 平台配置 (Platform Configuration)
# ============================================
# 選擇運行平台: windows | linux
PLATFORM=windows

# 重啟策略: no | always | unless-stopped | on-failure
RESTART_POLICY=unless-stopped

# ============================================
# Redis 配置 (Redis Configuration)
# ============================================
# Redis 主機位址 (Docker 內部使用 service name)
# Windows 開發: redis (使用 Docker service name)
# Linux 生產:   redis
REDIS_HOST=redis

# Redis 外部端口 (主機映射)
REDIS_PORT=6379

# Redis 內部端口 (容器內部)
REDIS_INTERNAL_PORT=6379

# Redis 密碼
REDIS_PASSWORD=mysecret

# Redis 數據持久化路徑
# Windows: ./redis_data
# Linux:   /var/lib/studio/redis_data
REDIS_DATA_PATH=./redis_data

# ============================================
# MySQL 配置 (MySQL Configuration)
# ============================================
# MySQL 主機位址 (Docker 內部使用 service name)
DB_HOST=mysql

# MySQL 外部端口 (避免與本地 MySQL 衝突)
MYSQL_PORT=3307

# MySQL 內部端口
DB_INTERNAL_PORT=3306

# MySQL Root 密碼
MYSQL_ROOT_PASSWORD=rootpassword

# MySQL 數據庫配置
DB_NAME=studio_db
DB_USER=studio_user
DB_PASSWORD=studio_password

# MySQL 數據持久化路徑
# Windows: ./mysql_data
# Linux:   /var/lib/studio/mysql_data
MYSQL_DATA_PATH=./mysql_data

# ============================================
# ComfyUI 配置 (ComfyUI Configuration)
# ============================================
# ComfyUI 主機位址
# Windows 開發: localhost (直接連接本地 ComfyUI)
# Linux 開發:   studio-engine (Docker 容器)
# Linux 生產:   studio-engine
COMFYUI_HOST=localhost

# ComfyUI 端口
COMFYUI_PORT=8188

# ComfyUI WebSocket 端口 (通常與 API 端口相同)
COMFYUI_WS_PORT=8188

# ComfyUI 程式碼路徑
# Windows: ./ComfyUI
# Linux:   ./ComfyUI 或 /opt/comfyui
COMFYUI_PATH=./ComfyUI

# ComfyUI 內部主機名稱 (Worker 連接用)
# Windows: localhost (因為 ComfyUI 在主機上運行)
# Linux:   studio-engine (Docker 容器名稱)
COMFY_HOST=localhost

# ============================================
# 模型路徑配置 (Model Path Configuration)
# ============================================
# 模型檔案路徑 (根據你的實際環境調整)
# Windows: /mnt/d/02_software/ComfyUI_windows_portable/ComfyUI/models
# Linux:   /data/models 或 /mnt/storage/models
MODEL_PATH=/mnt/d/02_software/ComfyUI_windows_portable/ComfyUI/models

# WSL 模型路徑 (僅 Windows WSL 環境需要)
WSL_MODEL_PATH=/mnt/d/02_software/ComfyUI_windows_portable/ComfyUI/models

# Extra Model Paths 配置檔案
EXTRA_MODEL_PATHS_FILE=./extra_model_paths.yaml

# ============================================
# 儲存路徑配置 (Storage Configuration)
# ============================================
# 儲存根目錄
# Windows: ./storage
# Linux:   /var/lib/studio/storage 或 ./storage
STORAGE_DIR=./storage

# 輸入檔案目錄
STORAGE_INPUT_DIR=./storage/inputs

# 輸出檔案目錄
STORAGE_OUTPUT_DIR=./storage/outputs

# 模型檔案目錄 (應用層使用)
STORAGE_MODELS_DIR=./storage/models

# 工作流目錄
WORKFLOW_DIR=./ComfyUIworkflow

# 日誌目錄
LOG_DIR=./logs

# ============================================
# Backend API 配置 (Backend Configuration)
# ============================================
# Backend 外部端口
BACKEND_PORT=5000

# Flask 配置
FLASK_ENV=development
FLASK_DEBUG=True

# ============================================
# Worker Timeout 配置 (Phase 9: Reliability)
# ============================================
# Worker 等待 ComfyUI 完成任務的最大時間（秒）
# 對於長時間任務（如虛擬人影片生成），建議設為 3600（1小時）或更高
WORKER_TIMEOUT=3600

# ComfyUI 狀態輪詢間隔（秒）
# 建議保持 0.5 秒以平衡效能和響應速度
COMFY_POLLING_INTERVAL=0.5

# ============================================
# Ngrok 配置 (可選)
# ============================================
# Ngrok 公網 URL (由 update_ngrok_config.ps1 自動更新)
NGROK_URL=

# ============================================
# 環境特定配置範例
# ============================================

# === Windows 開發環境配置 ===
# PLATFORM=windows
# COMFYUI_HOST=localhost
# COMFY_HOST=localhost
# MODEL_PATH=/mnt/d/02_software/ComfyUI_windows_portable/ComfyUI/models
# REDIS_DATA_PATH=./redis_data
# MYSQL_DATA_PATH=./mysql_data
# STORAGE_DIR=./storage

# === Linux 開發環境配置 ===
# PLATFORM=linux
# COMFYUI_HOST=studio-engine
# COMFY_HOST=studio-engine
# MODEL_PATH=/data/models
# REDIS_DATA_PATH=./redis_data
# MYSQL_DATA_PATH=./mysql_data
# STORAGE_DIR=./storage

# === Linux 生產環境配置 ===
# PLATFORM=linux
# COMFYUI_HOST=studio-engine
# COMFY_HOST=studio-engine
# MODEL_PATH=/mnt/storage/models
# REDIS_DATA_PATH=/var/lib/studio/redis_data
# MYSQL_DATA_PATH=/var/lib/studio/mysql_data
# STORAGE_DIR=/var/lib/studio/storage
# RESTART_POLICY=always
